# Astroloh - –ù–∞–≤—ã–∫ –ê—Å—Ç—Ä–æ–ª–æ–≥ –¥–ª—è –Ø–Ω–¥–µ–∫—Å –ê–ª–∏—Å—ã

–ì–æ–ª–æ—Å–æ–≤–æ–π –Ω–∞–≤—ã–∫ –¥–ª—è –Ø–Ω–¥–µ–∫—Å –ê–ª–∏—Å—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥–Ω–æ–∑—ã –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåü –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã –Ω–∞ –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü
- üéÇ –ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–æ –¥–∞—Ç–µ –∏ –≤—Ä–µ–º–µ–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è  
- üíë –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞
- üíû –°–∏–Ω–∞—Å—Ç—Ä–∏—è –∏ –∞–Ω–∞–ª–∏–∑ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (–Ω–∞ –±–∞–∑–µ Kerykeion)
- üåô –õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- üîÆ –ê—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
- ‚≠ê –ê—Å–ø–µ–∫—Ç—ã –ø–ª–∞–Ω–µ—Ç —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –æ—Ä–±–∏—Å–∞–º–∏
- üìä –ê—Ä–∞–±—Å–∫–∏–µ —á–∞—Å—Ç–∏ (–∂—Ä–µ–±–∏–∏) –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- üè† –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –¥–æ–º–æ–≤ (Placidus, Koch, Equal –∏ –¥—Ä.)
- üåç –¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–π –∏ —Å–∏–¥–µ—Ä–∏—á–µ—Å–∫–∏–π –∑–æ–¥–∏–∞–∫–∏
- üìà –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –∏ —Ç—Ä–∞–Ω–∑–∏—Ç—ã –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- üé® SVG-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–∞—Ä—Ç
- üåü –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–≤–µ–∑–¥—ã –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Python 3.12, FastAPI
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **–ê—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**: 
  - **Kerykeion** (–æ—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏)
  - **Swiss Ephemeris** (pyswisseph) - –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–µ —ç—Ñ–µ–º–µ—Ä–∏–¥—ã
  - **Skyfield** - –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã –Ω–∞ Python
  - **Astropy** - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –Ø–Ω–¥–µ–∫—Å.–î–∏–∞–ª–æ–≥–∏ API
- **–ò–ò-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: Yandex GPT –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: Docker, CI/CD

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –° Docker

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/evgenygurin/astroloh.git
cd astroloh
```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å Docker Compose:

```bash
docker-compose up --build
```

4. –û—Ç–∫—Ä–æ–π—Ç–µ <http://localhost:8000/docs> –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

**–î–ª—è Linux/Windows (–ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π):**

```bash
pip install -e ".[full,dev]"
```

**–î–ª—è macOS (–±–µ–∑ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ C-–±–∏–±–ª–∏–æ—Ç–µ–∫):**

```bash
pip install -e ".[macos,dev]"
```

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**

```bash
pip install -e ".[minimal,dev]"
```

**–î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏:**

```bash
pip install -r requirements.txt
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### –ê—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º:

1. **Kerykeion** >=4.11.0 - ‚≠ê **–û–°–ù–û–í–ù–ê–Ø** –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏
   - –ü–æ–ª–Ω—ã–µ –Ω–∞—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã —Å –≤—Å–µ–º–∏ –ø–ª–∞–Ω–µ—Ç–∞–º–∏ (–≤–∫–ª—é—á–∞—è –•–∏—Ä–æ–Ω, –õ–∏–ª–∏—Ç, –õ—É–Ω–Ω—ã–µ —É–∑–ª—ã)
   - –ê—Å–ø–µ–∫—Ç—ã —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –æ—Ä–±–∏—Å–∞–º–∏
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –¥–æ–º–æ–≤ (Placidus, Koch, Equal, Whole Sign –∏ –¥—Ä.)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–æ–ø–∏—á–µ—Å–∫–æ–≥–æ –∏ —Å–∏–¥–µ—Ä–∏—á–µ—Å–∫–æ–≥–æ –∑–æ–¥–∏–∞–∫–∞
   - –°–∏–Ω–∞—Å—Ç—Ä–∏—è (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫–∞—Ä—Ç)
   - –¢—Ä–∞–Ω–∑–∏—Ç—ã –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏
   - SVG-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–∞—Ä—Ç
   - –ê—Ä–∞–±—Å–∫–∏–µ —á–∞—Å—Ç–∏ (–∂—Ä–µ–±–∏–∏)

2. **Swiss Ephemeris** (pyswisseph) - –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–µ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (—Ñ–æ–ª–±—ç–∫)
3. **Skyfield** - –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã –Ω–∞ —á–∏—Å—Ç–æ–º Python (—Ñ–æ–ª–±—ç–∫)
4. **Astropy** - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (—Ñ–æ–ª–±—ç–∫)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:**

- **Linux/Windows**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É `[full]` –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- **macOS**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `[macos]` - Kerykeion —Å–æ–≤–º–µ—Å—Ç–∏–º –±–µ–∑ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ C
- **Professional**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `[professional]` –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
- **CI/Docker**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `[minimal]` –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –≤—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ `[dev]` –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**: Kerykeion ‚Üí Swiss Ephemeris ‚Üí Skyfield ‚Üí –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
astroloh/
‚îú‚îÄ‚îÄ app/                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ scripts/               # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml     # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md            # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## API Endpoints

- `GET /` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- `POST /api/v1/yandex/webhook` - Webhook –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏–∞–ª–æ–≥–æ–≤

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

```bash
black app/ tests/
isort app/ tests/
```

### –õ–∏–Ω—Ç–∏–Ω–≥

```bash
flake8 app/ tests/
mypy app/
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
pytest
```

## –î–µ–ø–ª–æ–π

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
